<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="styles.css" />

    <title>Movies!</title>
  </head>
  <body>
    <div class="container">
      <h1 class="text-center mt-3 bg-warning p-2 mb-5" id="header">
        Movie Pedia
      </h1>

      <form autocomplete="off" id="movie-form">
        <div class="form-group">
          <input class="form-control" type="text" id="movie-input" autofocus />
        </div>

        <div class="form-group">
          <button class="btn btn-primary" id="search-btn" type="submit">
            clear
          </button>
        </div>
      </form>

      <div id="rating"></div>
      <div id="result"></div>
    </div>
    <script>
      $(document).ready(function () {
        $("#movie-input").on("keyup", function (e) {
          console.log(e.target.value);

          var apiKey = config.ApiKey;

          var movie = $("#movie-input").val();

          var result = "";

          var url = "http://www.omdbapi.com/?apikey=" + apiKey;

          $.ajax({
            method: "GET",
            url: url + "&t=" + movie,
            success: function (data) {
              console.log(data);

              var rating = `
                <h1 style="margin:0 auto">${data.Title}</h1>
                <p class="badge badge-pill badge-dark">Rating : ${data.imdbRating}</p>
                <p class="badge badge-pill badge-secondary">votes : ${data.imdbVotes}</p>
                `;

              result = `
                
                <img id="poster" class="img-thumbnail mb-2 mx-auto rounded d-block mr-2" src="${data.Poster}"></img>
                
              <ul class="list-group mt-2 mb-3">
                <li  class="list-group-item active"><strong>Plot</strong> : ${data.Plot}</li>
                <li class="list-group-item"><strong>Actors </strong>: ${data.Actors}</li>
                <li class="list-group-item"><strong>Genre </strong> : ${data.Genre}</li>
                <li class="list-group-item"><strong>Type </strong>: ${data.Type}</li>
                <li class="list-group-item"><strong>Language </strong>: ${data.Language}</li>
                <li class="list-group-item"><strong>Release Date </strong>: ${data.Released}</li>
                <li class="list-group-item"><strong>Awards </strong>: ${data.Awards}</li>
                <li class="list-group-item"><strong>Country </strong>: ${data.Country}</li>
                </ul>
                `;

              $("#result").html(result);
              $("#rating").html(rating);
            },
          });
        });
      });
    </script>
    <script type="text/javascript" src="config.js"></script>
  </body>
</html>
